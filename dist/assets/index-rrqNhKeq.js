var Ae=Object.defineProperty;var ce=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var Z=(e,t,s)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,X=(e,t)=>{for(var s in t||(t={}))$e.call(t,s)&&Z(e,s,t[s]);if(ce)for(var s of ce(t))Oe.call(t,s)&&Z(e,s,t[s]);return e};var _=(e,t,s)=>Z(e,typeof t!="symbol"?t+"":t,s);var M=(e,t,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(u){i(u)}},r=a=>{try{o(s.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,r);o((s=s.apply(e,t)).next())});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();const Te=(e,t)=>e===t,xe=Symbol("solid-track"),B={equals:Te};let de=me;const O=1,F=2,he={owned:null,cleanups:null,context:null,owner:null};var g=null;let Y=null,Le=null,h=null,p=null,C=null,z=0;function j(e,t){const s=h,n=g,i=e.length===0,l=t===void 0?n:t,r=i?he:{owned:null,cleanups:null,context:l?l.context:null,owner:l},o=i?e:()=>e(()=>W(()=>H(r)));g=r,h=null;try{return Q(o,!0)}finally{h=s,g=n}}function E(e,t){t=t?Object.assign({},B,t):B;const s={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(i=i(s.value)),pe(s,i));return[be.bind(s),n]}function I(e,t,s){const n=le(e,t,!1,O);N(n)}function _e(e,t,s){de=Pe;const n=le(e,t,!1,O);n.user=!0,C?C.push(n):N(n)}function R(e,t,s){s=s?Object.assign({},B,s):B;const n=le(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,N(n),be.bind(n)}function W(e){if(h===null)return e();const t=h;h=null;try{return e()}finally{h=t}}function Me(e){_e(()=>W(e))}function ge(e){return g===null||(g.cleanups===null?g.cleanups=[e]:g.cleanups.push(e)),e}function be(){if(this.sources&&this.state)if(this.state===O)N(this);else{const e=p;p=null,Q(()=>q(this),!1),p=e}if(h){const e=this.observers?this.observers.length:0;h.sources?(h.sources.push(this),h.sourceSlots.push(e)):(h.sources=[this],h.sourceSlots=[e]),this.observers?(this.observers.push(h),this.observerSlots.push(h.sources.length-1)):(this.observers=[h],this.observerSlots=[h.sources.length-1])}return this.value}function pe(e,t,s){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Q(()=>{for(let i=0;i<e.observers.length;i+=1){const l=e.observers[i],r=Y&&Y.running;r&&Y.disposed.has(l),(r?!l.tState:!l.state)&&(l.pure?p.push(l):C.push(l),l.observers&&ve(l)),r||(l.state=O)}if(p.length>1e6)throw p=[],new Error},!1)),t}function N(e){if(!e.fn)return;H(e);const t=z;Re(e,e.value,t)}function Re(e,t,s){let n;const i=g,l=h;h=g=e;try{n=e.fn(t)}catch(r){return e.pure&&(e.state=O,e.owned&&e.owned.forEach(H),e.owned=null),e.updatedAt=s+1,Se(r)}finally{h=l,g=i}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?pe(e,n):e.value=n,e.updatedAt=s)}function le(e,t,s,n=O,i){const l={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:g,context:g?g.context:null,pure:s};return g===null||g!==he&&(g.owned?g.owned.push(l):g.owned=[l]),l}function U(e){if(e.state===0)return;if(e.state===F)return q(e);if(e.suspense&&W(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<z);)e.state&&t.push(e);for(let s=t.length-1;s>=0;s--)if(e=t[s],e.state===O)N(e);else if(e.state===F){const n=p;p=null,Q(()=>q(e,t[0]),!1),p=n}}function Q(e,t){if(p)return e();let s=!1;t||(p=[]),C?s=!0:C=[],z++;try{const n=e();return We(s),n}catch(n){s||(C=null),p=null,Se(n)}}function We(e){if(p&&(me(p),p=null),e)return;const t=C;C=null,t.length&&Q(()=>de(t),!1)}function me(e){for(let t=0;t<e.length;t++)U(e[t])}function Pe(e){let t,s=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[s++]=n:U(n)}for(t=0;t<s;t++)U(e[t])}function q(e,t){e.state=0;for(let s=0;s<e.sources.length;s+=1){const n=e.sources[s];if(n.sources){const i=n.state;i===O?n!==t&&(!n.updatedAt||n.updatedAt<z)&&U(n):i===F&&q(n,t)}}}function ve(e){for(let t=0;t<e.observers.length;t+=1){const s=e.observers[t];s.state||(s.state=F,s.pure?p.push(s):C.push(s),s.observers&&ve(s))}}function H(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),n=e.sourceSlots.pop(),i=s.observers;if(i&&i.length){const l=i.pop(),r=s.observerSlots.pop();n<i.length&&(l.sourceSlots[r]=n,i[n]=l,s.observerSlots[n]=r)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)H(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Ie(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Se(e,t=g){throw Ie(e)}const Ne=Symbol("fallback");function ae(e){for(let t=0;t<e.length;t++)e[t]()}function Qe(e,t,s={}){let n=[],i=[],l=[],r=0,o=t.length>1?[]:null;return ge(()=>ae(l)),()=>{let a=e()||[],u,c;return a[xe],W(()=>{let d=a.length,S,w,x,L,A,v,k,f,y;if(d===0)r!==0&&(ae(l),l=[],n=[],i=[],r=0,o&&(o=[])),s.fallback&&(n=[Ne],i[0]=j(D=>(l[0]=D,s.fallback())),r=1);else if(r===0){for(i=new Array(d),c=0;c<d;c++)n[c]=a[c],i[c]=j(m);r=d}else{for(x=new Array(d),L=new Array(d),o&&(A=new Array(d)),v=0,k=Math.min(r,d);v<k&&n[v]===a[v];v++);for(k=r-1,f=d-1;k>=v&&f>=v&&n[k]===a[f];k--,f--)x[f]=i[k],L[f]=l[k],o&&(A[f]=o[k]);for(S=new Map,w=new Array(f+1),c=f;c>=v;c--)y=a[c],u=S.get(y),w[c]=u===void 0?-1:u,S.set(y,c);for(u=v;u<=k;u++)y=n[u],c=S.get(y),c!==void 0&&c!==-1?(x[c]=i[u],L[c]=l[u],o&&(A[c]=o[u]),c=w[c],S.set(y,c)):l[u]();for(c=v;c<d;c++)c in x?(i[c]=x[c],l[c]=L[c],o&&(o[c]=A[c],o[c](c))):i[c]=j(m);i=i.slice(0,r=d),n=a.slice(0)}return i});function m(d){if(l[c]=d,o){const[S,w]=E(c);return o[c]=w,t(a[c],S)}return t(a[c])}}}function $(e,t){return W(()=>e(t||{}))}const De=e=>`Stale read from <${e}>.`;function je(e){const t="fallback"in e&&{fallback:()=>e.fallback};return R(Qe(()=>e.each,e.children,t||void 0))}function te(e){const t=e.keyed,s=R(()=>e.when,void 0,{equals:(n,i)=>t?n===i:!n==!i});return R(()=>{const n=s();if(n){const i=e.children;return typeof i=="function"&&i.length>0?W(()=>i(t?n:()=>{if(!W(s))throw De("Show");return e.when})):i}return e.fallback},void 0,void 0)}function Be(e,t,s){let n=s.length,i=t.length,l=n,r=0,o=0,a=t[i-1].nextSibling,u=null;for(;r<i||o<l;){if(t[r]===s[o]){r++,o++;continue}for(;t[i-1]===s[l-1];)i--,l--;if(i===r){const c=l<n?o?s[o-1].nextSibling:s[l-o]:a;for(;o<l;)e.insertBefore(s[o++],c)}else if(l===o)for(;r<i;)(!u||!u.has(t[r]))&&t[r].remove(),r++;else if(t[r]===s[l-1]&&s[o]===t[i-1]){const c=t[--i].nextSibling;e.insertBefore(s[o++],t[r++].nextSibling),e.insertBefore(s[--l],c),t[i]=s[l]}else{if(!u){u=new Map;let m=o;for(;m<l;)u.set(s[m],m++)}const c=u.get(t[r]);if(c!=null)if(o<c&&c<l){let m=r,d=1,S;for(;++m<i&&m<l&&!((S=u.get(t[m]))==null||S!==c+d);)d++;if(d>c-o){const w=t[r];for(;o<c;)e.insertBefore(s[o++],w)}else e.replaceChild(s[o++],t[r++])}else r++;else t[r++].remove()}}}function Fe(e,t,s,n={}){let i;return j(l=>{i=l,t===document?e():b(t,e(),t.firstChild?null:void 0,s)},n.owner),()=>{i(),t.textContent=""}}function T(e,t,s){let n;const i=()=>{const r=document.createElement("template");return r.innerHTML=e,r.content.firstChild},l=()=>(n||(n=i())).cloneNode(!0);return l.cloneNode=l,l}function ke(e,t,s){e.setAttribute(t,s)}function ee(e,t){t==null?e.removeAttribute("class"):e.className=t}function b(e,t,s,n){if(s!==void 0&&!n&&(n=[]),typeof t!="function")return G(e,t,n,s);I(i=>G(e,t(),i,s),n)}function G(e,t,s,n,i){for(;typeof s=="function";)s=s();if(t===s)return s;const l=typeof t,r=n!==void 0;if(e=r&&s[0]&&s[0].parentNode||e,l==="string"||l==="number"){if(l==="number"&&(t=t.toString(),t===s))return s;if(r){let o=s[0];o&&o.nodeType===3?o.data!==t&&(o.data=t):o=document.createTextNode(t),s=P(e,s,n,o)}else s!==""&&typeof s=="string"?s=e.firstChild.data=t:s=e.textContent=t}else if(t==null||l==="boolean")s=P(e,s,n);else{if(l==="function")return I(()=>{let o=t();for(;typeof o=="function";)o=o();s=G(e,o,s,n)}),()=>s;if(Array.isArray(t)){const o=[],a=s&&Array.isArray(s);if(se(o,t,s,i))return I(()=>s=G(e,o,s,n,!0)),()=>s;if(o.length===0){if(s=P(e,s,n),r)return s}else a?s.length===0?ue(e,o,n):Be(e,s,o):(s&&P(e),ue(e,o));s=o}else if(t.nodeType){if(Array.isArray(s)){if(r)return s=P(e,s,n,t);P(e,s,null,t)}else s==null||s===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);s=t}}return s}function se(e,t,s,n){let i=!1;for(let l=0,r=t.length;l<r;l++){let o=t[l],a=s&&s[e.length],u;if(!(o==null||o===!0||o===!1))if((u=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))i=se(e,o,a)||i;else if(u==="function")if(n){for(;typeof o=="function";)o=o();i=se(e,Array.isArray(o)?o:[o],Array.isArray(a)?a:[a])||i}else e.push(o),i=!0;else{const c=String(o);a&&a.nodeType===3&&a.data===c?e.push(a):e.push(document.createTextNode(c))}}return i}function ue(e,t,s=null){for(let n=0,i=t.length;n<i;n++)e.insertBefore(t[n],s)}function P(e,t,s,n){if(s===void 0)return e.textContent="";const i=n||document.createTextNode("");if(t.length){let l=!1;for(let r=t.length-1;r>=0;r--){const o=t[r];if(i!==o){const a=o.parentNode===e;!l&&!r?a?e.replaceChild(i,o):e.insertBefore(i,s):a&&o.remove()}else l=!0}}else e.insertBefore(i,s);return[i]}class Ue{constructor(t,s=!1,n=!0,i=null,l=5,r=5e3,o=100){_(this,"socket");_(this,"customCallbacks",{});_(this,"messageQueue",[]);_(this,"reconnectionAttempts",0);_(this,"isReconnecting",!1);_(this,"isOpen",!1);this.url=t,this.debug=s,this.keepAlive=n,this.pageId=i,this.maxReconnectionAttempts=l,this.reconnectionInterval=r,this.sendingInterval=o,this.customCallbacks={}}setSocketOpen(t){this.debug&&console.log("[WebSocket] set connection status to: "+(t?"OPEN":"CLOSE")),this.isOpen=t}isSocketOpen(){return this.isOpen}addEventListener(t,s){const n=t.split(".");let i=this.customCallbacks;n.forEach((l,r)=>{if(i[l]||(i[l]={}),r===n.length-1){const o=i[l].callbacks;o?o.push(s):i[l].callbacks=[s],this.debug&&console.log("[WebSocket] new event listener registered: "+t)}else i=i[l]})}removeEventListener(t,s){const n=t.split(".");let i=this.customCallbacks,l=null;if(n.forEach((r,o)=>{i[r]&&(o===n.length-1?l=i[r].callbacks:i=i[r])}),l){const r=l.indexOf(s);r!==-1&&(l.splice(r,1),this.debug&&console.log("[WebSocket] event listener was removed: "+t))}}clearEventListeners(){this.customCallbacks={},this.debug&&console.log("[WebSocket] all events was cleared")}traverse(t,s,n,i){for(const l of s){const r=l.split(".");let o=t;for(const a of r)o&&o[a]&&o[a].callbacks&&(o[a].callbacks!=null||o[a].callbacks!=null)&&o[a].callbacks.forEach(u=>{u(i||n)}),o=o[a]}}_callEventCallbacks(t,s,n){this.traverse(this.customCallbacks,t,s,n)}start(){this.connect()}connect(){return M(this,null,function*(){return new Promise((t,s)=>M(this,null,function*(){this.debug&&console.log("[WebSocket] connection created");const n=new WebSocket(this.url+`?token=${this.pageId}`);n.onclose=i=>{this.onClose(i),s(i)},n.onopen=i=>{this.socket=n,this.initSocketEvents(),this._callEventCallbacks(["open"],i,null),this.debug&&console.log("[WebSocket] connection opened (in connection handler):",i),this.setSocketOpen(!0),this.isReconnecting=!1,this.reconnectionAttempts=0,setTimeout(()=>{this.sendQueuedMessages().then(()=>{})},100),t()}}))})}initSocketEvents(){this.socket.onopen=this.onOpen.bind(this),this.socket.onmessage=this.onMessage.bind(this),this.socket.onclose=this.onClose.bind(this),this.socket.onerror=this.onError.bind(this)}onOpen(t){this.debug&&console.log("[WebSocket] connection opened:",t),this.setSocketOpen(!0),this._callEventCallbacks(["open"],t,null),this.sendQueuedMessages().then(()=>{})}onMessage(t){this.debug&&(console.log("[WebSocket] message received:"),console.log(t.data));const s=JSON.parse(t.data),n=s.identifier;if(n){const i=["message."+n];this._callEventCallbacks(i,t,s)}this._callEventCallbacks(["message"],t,t.data)}onClose(t){return M(this,null,function*(){this.debug&&console.log("[WebSocket] connection closed:",t),this.setSocketOpen(!1),this._callEventCallbacks(["close"],t,null),!this.isReconnecting&&t.wasClean&&(this.messageQueue=[]),yield new Promise(s=>setTimeout(s,5e3)),yield this.reconnect()})}reconnect(){return M(this,null,function*(){if(this.reconnectionAttempts=0,!this.isReconnecting){for(this.isReconnecting=!0;this.shouldReconnect();)try{this.debug&&console.log(`[WebSocket] Reconnecting attempt ${this.reconnectionAttempts+1}...`);const t=new WebSocket(this.url+`?token=${this.pageId}`);let s=yield new Promise((n,i)=>{t.onopen=l=>{n(l)},t.onerror=l=>{i(l)}});this.closePreviousSocket(),this.socket=t,this._callEventCallbacks(["open"],s,null),this.debug&&console.log("[WebSocket] connection opened (in reconnection handler):",s),this.setSocketOpen(!0),this.initSocketEvents(),this.isReconnecting=!1,setTimeout(()=>{this.sendQueuedMessages().then(()=>{})},100);return}catch(t){this.debug&&console.error("[WebSocket] Reconnection attempt failed:",t),this.reconnectionAttempts++,yield new Promise(s=>setTimeout(s,this.reconnectionInterval))}this.debug&&console.log("[WebSocket] Maximum reconnection attempts reached or disabled"),this.isReconnecting=!1}})}closePreviousSocket(){this.socket&&this.socket.readyState!==WebSocket.CLOSED&&(console.log("Closing previous socket connection..."),this.socket.close())}shouldReconnect(){return this.keepAlive&&this.isReconnecting?this.isReconnecting:this.reconnectionAttempts<this.maxReconnectionAttempts&&this.isReconnecting}onError(t){this.debug&&console.error("[WebSocket] error:",t),this._callEventCallbacks(["error"],t,null)}sendQueuedMessages(){return M(this,null,function*(){for(;this.messageQueue.length>0&&this.socket&&this.isSocketOpen();){const t=this.messageQueue[0];try{this.sendMessageToSocket(t.token,t.command,t.data),this.messageQueue.shift(),this.debug&&console.log("[WebSocket] Message in queue:",this.messageQueue.length)}catch(s){this.debug&&console.error("[WebSocket] Error sending message:",s)}yield new Promise(s=>setTimeout(s,this.sendingInterval))}})}sendMessageToSocket(t,s,n){this.socket&&this.isSocketOpen()&&(this.socket.send(JSON.stringify({token:t,command:s,data:n})),this.debug&&console.log("[WebSocket] message send:",t))}message(t,s){return new Promise(n=>{const i=this.generateToken();n(i);const l={token:i,command:t,data:s};this.messageQueue.push(l),this.debug&&console.log("[WebSocket] message added to queue:",l),this.messageQueue.length===1&&this.isSocketOpen()&&this.sendQueuedMessages()})}generateToken(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let s="";for(let n=0;n<16;n++){const i=Math.floor(Math.random()*t.length);s+=t.charAt(i)}return s}stop(){return M(this,null,function*(){if(this.socket&&this.socket.readyState===WebSocket.OPEN){yield new Promise(t=>{this.socket.onclose=s=>{!this.isReconnecting&&s.wasClean&&(this.reconnectionAttempts=0,this.isReconnecting=!1,this.messageQueue=[]),t()},this.socket.close(),this.setSocketOpen(!1),this.debug&&console.log("[WebSocket] socket close")});return}else this.isReconnecting=!1,this.messageQueue=[]})}}const we="/assets/logo-BZHQ9bg-.svg";var qe=T("<div class=scoreboardHead><div class=status><div class=scoreboard-logo><img alt=Logo></div></div><div class=timer><div class=left></div><div class=elapsed>");const fe=e=>{const t=Math.floor(e/60),s=e%60;return`${String(t).padStart(2,"0")}:${String(s).padStart(2,"0")}`},Ge=e=>(()=>{var t=qe(),s=t.firstChild,n=s.firstChild,i=n.firstChild,l=s.nextSibling,r=l.firstChild,o=r.nextSibling;return ke(i,"src",we),b(r,()=>fe(e.timing.left)),b(o,()=>fe(e.timing.elapsed)),t})();var ze=T("<div class=table><div class=table-header></div><div class=table-body>"),He=T("<div>"),Ke=T('<div class=row><div class="column position"></div><div class="column driver"><div class=number></div><div class=name></div></div><div class="column lap"></div><div></div><div></div><div class="column interval">');function ne(e){if(e==null||e==1/0)return"";const t=Math.floor(e/1e3),s=e%1e3,n=Math.floor(t/60),i=t%60,l=n.toString().padStart(1,"0"),r=i.toString().padStart(n>0?2:1,"0"),o=s.toString().padStart(3,"0");return n==0?`${r}.${o}`:`${l}:${r}.${o}`}function ye(e){let t=null;const s=Object.keys(e);for(let n=0;n<s.length;n++){const i=s[n],l=e[i];l.time!==null&&l.end!==null&&(!t||l.number>t.number)&&(t=l)}return t}function Ve(e){let t=ye(e);return t!=null?ne(t.time):""}const Je=e=>{const[t,s]=E({col1:{visible:!0,size:"6vw",label:"#",class:"position"},col2:{visible:!0,size:"32vw",label:"Пилот",class:"driver"},col3:{visible:!0,size:"5vw",label:"Кругов",class:"lap"},col5:{visible:!0,size:"14vw",label:"Лучший",class:"best"},col4:{visible:!0,size:"14vw",label:"Последний",class:"last"},col6:{visible:!0,size:"14vw",label:"Отставание",class:"interval"}}),n=()=>{let l=[];const r=t();for(let o of Object.keys(r))r[o].visible&&l.push(r[o].size);return l.join(" ")},i=(l,r,o)=>l==null?"":l.time===o?"purple":r?"green":l==null?"":"yellow";return(()=>{var l=ze(),r=l.firstChild,o=r.nextSibling;return b(r,()=>Object.keys(t()).map(a=>{const u=t()[a];return u.visible&&(()=>{var c=He();return b(c,()=>u.label),I(()=>ee(c,`column ${u.class}`)),c})()})),b(o,$(je,{get each(){return Object.entries(e.raceData)},children:([a,u],c)=>(()=>{var m=Ke(),d=m.firstChild,S=d.nextSibling,w=S.firstChild,x=w.nextSibling,L=S.nextSibling,A=L.nextSibling,v=A.nextSibling,k=v.nextSibling;return b(d,()=>c()+1),b(w,()=>u.id),b(x,()=>u.name),b(L,(()=>{var f=R(()=>Object.keys(u.laps).length>0);return()=>f()?Object.keys(u.laps).length:""})()),b(A,(()=>{var f=R(()=>Object.keys(u.laps).length>0);return()=>f()?ne(u.bestTime):""})()),b(v,(()=>{var f=R(()=>Object.keys(u.laps).length>0);return()=>f()?Ve(u.laps):""})()),b(k,(()=>{var f=R(()=>c()===0||Object.keys(u.laps).length<=0);return()=>f()?"":`+${ne(u.bestTime-e.raceData[0].bestTime)}`})()),I(f=>{var y=n(),D=`column best ${u.bestTime===e.bestLap?"purple":""}`,re=`column last ${i(ye(u.laps),u.improved,e.bestLap)}`;return y!==f.e&&((f.e=y)!=null?m.style.setProperty("grid-template-columns",y):m.style.removeProperty("grid-template-columns")),D!==f.t&&ee(A,f.t=D),re!==f.a&&ee(v,f.a=re),f},{e:void 0,t:void 0,a:void 0}),m})()})),I(a=>(a=n())!=null?r.style.setProperty("grid-template-columns",a):r.style.removeProperty("grid-template-columns")),l})()};var Ze=T("<div class=status>Подключение"),Xe=T("<div class=status>Ожидание заезда"),Ye=T('<div class=stub><div class=gradient-bg><svg xmlns=http://www.w3.org/2000/svg><defs><filter id=goo><feGaussianBlur in=SourceGraphic stdDeviation=10 result=blur></feGaussianBlur><feColorMatrix in=blur mode=matrix values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -8"result=goo></feColorMatrix><feBlend in=SourceGraphic in2=goo></feBlend></filter></defs></svg><div class=gradients-container><div class=g1></div><div class=g2></div><div class=g3></div><div class=g4></div><div class=g5></div></div></div><div class=logo><img alt=Logo>');const et=e=>(()=>{var t=Ye(),s=t.firstChild,n=s.nextSibling,i=n.firstChild;return ke(i,"src",we),b(n,$(te,{get when(){return e.status===!1},get children(){return Ze()}}),null),b(n,$(te,{get when(){return e.status===!0},get children(){return Xe()}}),null),t})();var tt=T("<div class=scoreboard>");const[st,nt]=E(!1),[Ct,it]=E(!1),[lt,Ce]=E({elapsed:null,left:null}),[ot,K]=E(!0),[rt,V]=E({}),[ct,at]=E([]),[ie,oe]=E(1/0),ut=e=>Object.values(e).sort((t,s)=>t.bestTime-s.bestTime),J=()=>{const e=ut(rt());at(e)};function ft(e){Ce(t=>({elapsed:e.data.elapsed,left:e.data.left}))}function dt(e){Ce(t=>({elapsed:e.data.elapsedTime,left:e.data.timeLeft})),it(e.data.active),V(e.data.racers),oe(e.data.bestLapTime),J(),e.data.active&&K(!1)}function ht(){nt(!0)}function gt(){K(!0)}function bt(){V({}),oe(1/0),J()}let Ee=null;function pt(){Ee=setTimeout(()=>{K(!0)},5*60*1e3)}function mt(){clearTimeout(Ee),K(!1)}function vt(e){V(t=>{let s=X({},t);return s[e.data.id].laps[e.data.lapNumber]={number:e.data.lapNumber,time:e.data.time},s[e.data.id].improved=e.data.isImproved,(s[e.data.id].improved||s[e.data.id].bestLap<1)&&(s[e.data.id].bestTime=e.data.time,s[e.data.id].bestLap=e.data.lapNumber),(ie()==null?1/0:ie())>e.data.time&&oe(e.data.time),s}),J()}function St(e){V(t=>{let s=X({},t);return s[e.data.id]={id:e.data.id,name:e.data.name!=""?e.data.name:"Карт #"+e.data.id,laps:{},bestLap:null,bestTime:1/0,improved:null},s}),J()}const kt=()=>{let e=new Ue("ws://192.168.1.71:5000",!0);return Me(()=>{e.start(),e.addEventListener("message.status",dt),e.addEventListener("open",ht),e.addEventListener("message.timing",ft),e.addEventListener("message.clear",bt),e.addEventListener("message.endLap",vt),e.addEventListener("message.addDriver",St),e.addEventListener("message.finish",pt),e.addEventListener("message.start",mt),e.addEventListener("close",gt),e.message("getStatus",{})}),ge(()=>{}),(()=>{var t=tt();return b(t,$(te,{get when(){return ot()},get children(){return $(et,{get status(){return st()}})}}),null),b(t,$(Ge,{get timing(){return lt()}}),null),b(t,$(Je,{get raceData(){return ct()},get bestLap(){return ie()}}),null),t})()},wt=document.getElementById("root");Fe(()=>$(kt,{}),wt);
